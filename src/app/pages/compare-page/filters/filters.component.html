<div id="main">

    <!-- Dialog title -->
    <h2 id="title-block" mat-dialog-title>Advanced card filters</h2>

    <!-- Dialog content -->
    <mat-dialog-content id="content-block" class="mat-typography p-3">
        @if (scryfall) {
            <div class="row m-0">
                <app-color-filter class="p-0 mb-2" 
                    title="Mana cost contains" 
                    identifier="color-include"
                    [initialColorFilter]="this.collectionService.filters.colorFilter"
                    [initialOppositeColorFilter]="this.collectionService.filters.colorUnfilter"
                    (colorsChanged)="updateColors($event)" 
                />
                <app-color-filter class="p-0 mb-2" 
                    title="Mana cost doesn't contain" 
                    identifier="color-exclude"
                    [initialColorFilter]="this.collectionService.filters.colorUnfilter"
                    [initialOppositeColorFilter]="this.collectionService.filters.colorFilter"
                    (colorsChanged)="updateReverseColors($event)" 
                />
                <app-rarity-filter class="p-0" 
                    (raritiesChanged)="updateRarities($event)" 
                />
                <app-tag-input title="Sets" 
                    [options]="sets" 
                    [initSelectedOptions]="this.collectionService.filters.sets" 
                    (selectionChanged)="updateSets($event)" 
                />
            </div>
        } @else {
            <div id="scryfall-loader">
                <h3 id="title">Loading Scryfall data...</h3>
                <div id="spinner" class="spinner spinner-border text-primary" role="status"></div>
            </div>
        }
    </mat-dialog-content>
    
    <!-- Dialog actions -->
    <mat-dialog-actions id="actions-block" align="end">
        <label id="cards-remaining">{{ this.collectionService.nbCards }} cards found</label>
        <button id="close-button" class="btn btn-primary" mat-button mat-dialog-close>Close</button>
        <button class="btn btn-primary" (click)="resetAllFilters()">Reset</button>
    </mat-dialog-actions>
</div>